#!/bin/bash

DIR=/sys/class/backlight/intel_backlight
MAX=$( cat $DIR/max_brightness )
DIFF=$(( MAX * $2 / 100 ))

current=$( cat $DIR/brightness )
minus=$(( current - DIFF ))
plus=$(( current + DIFF ))

direction=${1:-down}
case $direction in
    up    ) sudo tee $DIR/brightness <<< $(( plus<MAX ? plus:MAX ));;
    down  ) sudo tee $DIR/brightness <<< $(( minus>0 ? minus:0 ));;
    *     ) ;;
esac
